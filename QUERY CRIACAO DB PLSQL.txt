
---------------------------------------------------- TABELA PERGUNTA ----------------------------------------------------------

id, titulo, descricao, num_pergunta , RESPOSTA ,DSCresposta, categoria, status, data_cadastro

CREATE SEQUENCE SEQ_PHSG_PERGUNTA
MINVALUE 1
MAXVALUE 999999999
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE PHSG_PERGUNTA (
  CODPERGUNTA NUMBER(6) DEFAUT SEQ_PHSG_USUARIO.NEXTVAL NOT NULL,
  DSCTITULOPERGUNTA VARCHAR2(200) NOT NULL,
  DSCPERGUNTA VARCHAR2(200) NOT NULL,
  NUMPERGUNTA NUMBER(2) NOT NULL,
  IDTRESPOSTA VARCHAR(1),
  DSCRESPOSTA VARCHAR(255),
  DSCCATEGORIA VARCHAR(200),
  DATCADASTRO DATE,
  IDTSTATUS VARCHAR(1) NOT NULL);

ALTER TABLE PHSG_USUARIO ADD (
  CONSTRAINT CODPERGUNTA_pk PRIMARY KEY (CODPERGUNTA));

COMMENT ON COLUMN PHSG_PERGUNTA.CODPERGUNTA IS 'CHAVE PRIMARIA DA TABELA';
COMMENT ON COLUMN PHSG_PERGUNTA.DSCTITULOPERGUNTA IS 'TITULO DA PERGUNTA';
COMMENT ON COLUMN PHSG_PERGUNTA.DSCPERGUNTA IS 'DESCRIÇÃO DO ENUNCIADO DA PERGUNTA';
COMMENT ON COLUMN PHSG_PERGUNTA.NUMPERGUNTA IS 'NUMERO DA PERGUNTA NA SEQUENCIA DE APRESENTAÇÃO NA TELA';
COMMENT ON COLUMN PHSG_PERGUNTA.IDTRESPOSTA IS 'RESPOSTA PHISHING(P) OU VERDADEIRO(V)';
COMMENT ON COLUMN PHSG_PERGUNTA.DSCRESPOSTA IS 'DESCRIÇÃO DA EXPLICAÇÃO DA RESPOSTA';
COMMENT ON COLUMN PHSG_PERGUNTA.DSCCATEGORIA IS 'CATEGORIZAÇÃO POR ÁREA DE ATUAÇÃO NA EMPRESA QUE A PERGUNTA É INTERESSANTE DE SER APLICADA';
COMMENT ON COLUMN PHSG_PERGUNTA.DATCADASTRO IS 'DATA EM QUE A PERGUNTA FOI CADASTRADA';
COMMENT ON COLUMN PHSG_PERGUNTA.IDTSTATUS IS 'PERGUNTA ATIVA(A) OU INATIVA(I)?';

ALTER TABLE PHSG_PERGUNTA
  ADD CONTRAINT CKC_PHSG_PERGUNTA_CONTRANS
  CHECK (IDTRESPOSTA IN ('P','V'))
  NOVALIDATE;

ALTER TABLE PHSG_PERGUNTA
  ADD CONTRAINT CKC_PHSG_PERGUNTA_CONTRANS
  CHECK (IDTSTATUS IN ('A','I'))
  NOVALIDATE;

---------------------------------------------------- TABELA USUARIO ----------------------------------------------------------

id, nome, email, pontuacao, data_resposta, status

CREATE SEQUENCE SEQ_PHSG_USUARIO
MINVALUE 1
MAXVALUE 999999999
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE PHSG_USUARIO (
  CODUSUARIO NUMBER(6) DEFAUT SEQ_PHSG_USUARIO.NEXTVAL NOT NULL,
  NOMUSUARIO VARCHAR2(200) NOT NULL,
  DSCEMAIL VARCHAR2(200) NOT NULL,
  NUMPONTUACAO NUMBER(2) NOT NULL,
  DATRESPOSTA DATE,
  IDTSTATUS VARCHAR(1) NOT NULL);

ALTER TABLE PHSG_USUARIO ADD (
  CONSTRAINT CODUSUARIO_pk PRIMARY KEY (CODUSUARIO));

COMMENT ON COLUMN PHSG_USUARIO.CODUSUARIO IS 'CHAVE PRIMARIA DA TABELA';
COMMENT ON COLUMN PHSG_USUARIO.NOMUSUARIO IS 'NOME DO USUÁRIO';
COMMENT ON COLUMN PHSG_USUARIO.DSCEMAIL IS 'EMAIL DO USUARIO';
COMMENT ON COLUMN PHSG_USUARIO.NUMPONTUACAO IS 'QUANTIDADE DE QUESTÕES QUE O USUÁRIO ACERTOU';
COMMENT ON COLUMN PHSG_USUARIO.DATRESPOSTA IS 'DATA EM QUE O QUESTIONÁRIO FOI RESPONDIDO';
COMMENT ON COLUMN PHSG_USUARIO.IDTSTATUS IS 'USUÁRIO JÁ RESPONDEU O QUESTIONÁRIO(V) OU (F)';


ALTER TABLE PHSG_USUARIO
  ADD CONTRAINT CKC_PHSG_USUARIO_CONTRANS
  CHECK (IDTSTATUS IN ('V','F'))
  NOVALIDATE;


---------------------------------------------------- TABELA HISTORICO ----------------------------------------------------------

id, id(fk_pergunta), resposta, data_resposta

CREATE SEQUENCE SEQ_PHSG_PERGUNTA
MINVALUE 1
MAXVALUE 999999999
START WITH 1
INCREMENT BY 1
NOCACHE;

CREATE TABLE PHSG_HISTORICO (
  CODHISTORICO NUMBER(6) DEFAUT SEQ_PHSG_USUARIO.NEXTVAL NOT NULL,
  NUMIDTRESPOSTA VARCHAR(1),
  DATCADASTRO DATE;

ALTER TABLE PHSG_USUARIO ADD (
  CONSTRAINT CODHISTORICO_pk PRIMARY KEY (CODHISTORICO));

COMMENT ON COLUMN PHSG_HISTORICO.CODHISTORICO IS 'CHAVE PRIMARIA DA TABELA';
COMMENT ON COLUMN PHSG_HISTORICO.NUMIDTRESPOSTA IS 'RESPOSTA PHISHING(P) OU VERDADEIRO(V)';
COMMENT ON COLUMN PHSG_HISTORICO.DATCADASTRO IS 'DATA QUE FOI PRENCHIDO';

ALTER TABLE PHSG_HISTORICO
  ADD CONTRAINT CKC_PHSG_PERGUNTA_CONTRANS
  CHECK (NUMIDTRESPOSTA IN ('P','V'))
  NOVALIDATE;




